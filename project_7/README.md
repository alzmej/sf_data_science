# Проект Разработка системы отбора случаев для проведения экспертизы медицинской помощи

## Оглавление  
[1. Описание проекта](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Описание-проекта)  
[2. Какой кейс решаем?](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Какой-кейс-решаем)  
[3. Краткая информация о данных](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Краткая-информация-о-данных)  
[4. Результат](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Результат)    
[5. Описание приложения](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Описание-приложения)  
[6. Выводы](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Выводы) 

### Описание проекта    
Работая с датасетом, в котором содержатся сведения о 4040925 случаях оказания медицинской помощи необходимо обеспечить отбор случаев оказанной медицинской помощи, оплаченной по обязательному медицинскому страхованию на медикоэкономическую экспертизу и экспертизу контроля качества в объёмах, определенных Приказом Министерства здравоохранения от 19 марта 2021 г. N 231н "Об утверждении порядка проведения контроля объемов, сроков, качества и условий предоставления медицинской помощи по обязательному медицинскому страхованию застрахованным лицам, а также ее финансового обеспечения".

:arrow_up:[к оглавлению](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Оглавление)


### Какой кейс решаем?    
Необходимо разработать систему которая среди случаев медицинской помощи, оплаченных за заданный период. Отбирает случаи в которых вероятность дефектов оказания медицинской помощи наибольшая в рамках заданных объёмов. 

В данной задаче 2 целевые переменные: 
- подозрение на наличие дефекта медикоэкономической экспертизы (далее МЭЭ)
- подозрение на наличие дефекта экспертизы контроля качества (далее ЭКМП)

Поставленная задача - задача классификации.

:arrow_up:[к оглавлению](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Оглавление)

### Краткая информация о данных

**Категориальные переменные**
* 'FILENAME' - Тип реестра счетов по имени файла
* 'TYPE_MO' - Тим медицинской организации по организационной структуре
* 'VIDPOM' - Вид медицинской помощи
* 'USL_OK' - Условия оказания медицинской помощ
* 'FOR_POM' - Форма медицинской помощи
* 'P_CEL' - Цель обращения за медицинской помощью
* 'C_ZAB' - Характер основного заболевания
* 'DN' - Признак диспансерного наблюдения
* 'VPOLIS' - Тип медицинского страхового полиса
* 'OPLATA' - Тип оплаты
* 'IDSP' - Код способа оплаты
* 'OKFS' - Код общероссийского классификатора форм собственности
* 'MO_level' - Уровень медициской помощи
* 'TYPE_DOC' - Тип медицинского работника, оказавшего медицинскую услугу
* 'SMO' - Код страховой медицинской организации (далее СМО), присутствует только для СМО, действующих на территории региона.
* 'month' - отчЁтный месяц
* 'MO' - Код медицинской организации в федеральном справочнике МО
* 'PROFIL' - Код профиля медицинской помощи 
* 'BED_PROFILE' - Код профиля койки
* 'SPEC_CODE' - Код специальности медицинского работника, оказавшего медицинскую услугу
* 'NPR_MO' - Код МО в федеральном справочнике МО, направившей на лечение
* 'IDDOKT' - Идентификатор медицинского работника, оказавшего медицинскую услугу
* 'CODE_OTD' - Код отделения лечения в региональном справочнике
* 'ISHOD' - Код исхода лечения
* 'CODE_USL' - Код оказанной услуги 

**бинарные признаки**
* 'DS_ONK' - Признак подозрения на злокачественное новобразование
* 'DS1_PR' - Признак впервые установленного диагноза
* 'REAB' - Признак случая медицинской реабилитации
* 'R_ISDENT' - Признак стоматологического случая
* 'DET' - Признак детского профиля
* 'NOVOR' - Признак новорожденного
* 'SEX' - Пол пациента
* 'VBR' - Признак оказания помощи мобильной медицинской бригадой
* 'DS0' - Диагноз направления на лечение
* 'DS2' - Сопутствующий диагноз
* 'DS3' - Диагноз осложнения основного заболевания

**числовые признаки**
* 'KOL_USL' - Количество услуг (кратность услуги)
* 'ORIT' - Количество дней пребывания в реанимационном отделении
* 'KD' - Количесво койкодней стационара
* 'AGE' - Возраст на дату завершения случая лет
* 'TARIF' - Тариф на оплату случая лечения
* 'SUMV' - Сумма выставленная на оплату
* 'KSLP' - Коэффициент сложности лечения стационарных больных
* 'attach' - Количество прикрепленного населения к медицинской организации
* 'population' - Население в населенном пункте, где находится медицинская организация

**преобразуемые / удаляемые признаки**
* 'UUID' - Уникальный иденти-фикатор случая медицинской помощи 
* 'NPR_DATE' - Дата направления на лечение
* 'GROUP_OMU' - Код группы диагностических услуг
* 'NHISTORY' - Номер истории болезни
* 'TAL_P' - Дата направления на лечение по высокотехнологической медицинской помощи
* 'DATE_1' - Дата начала случая лечения
* 'DATE_2' - Дата завершения случая лечения
* 'DS1' - Основной клинический диагноз
* 'PERSCODE' - Уникальный идентификатор пациента
* 'BIRTHDAY' - Дата рождения пациента
* 'COUNTRY' - Код национальности
* 'CRIT' - Дополнительный критерий применения схем лечения или технологий
* 'ED_COL' - Количество единиц оплаты
* 'RSLT' - Код результата лечения

**Целевые переменные**
* 'MEE' - Результат МЭЭ
* 'EKMP' - Результат ЭКМП
  
:arrow_up:[к оглавлению](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Оглавление)


### Результаты: 
В процессе работы проведены:

1. Загрузка и первичный анализ данных
2. Исследование и проектирование признаков
3. Очистка и отбор признаков
4. Построение и тестирование модели классификации различной природы, отобрана наиболее эффективная.
5. На основании полученных моделей разработано Web приложение для проведения тестовой эксплуатации полученного классификатора

:arrow_up:[к оглавлению](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Оглавление)


### Описание приложения:
Веб  приложение реализовано при помощи библиотеки **streamlit**, позволяющей быстро создавать проекты на языке python. Выполняет следующие функции:
- задание параметров отбора случаев для классификации по параметрам (период времени, ФИО и дата рождения пацинета, единый номер полиса, код медицинской орагнизации, код страховой медицинской организации) в различных сочетаниях.
- по заданным параметрам выполняет запрос к базе данных и получает результат в виде датасета.
- подготавливает данные к подаче в модель
- производит предсказание вероятности дефектов МЕЕ, ЕКМП или обоих вариантов вместе
- позволяет сохранить результат в файл с расширением *.xlsx

файлы приложения расположены в папке **Web_application**, за исключением моделей(из за их больших размеров).

### Выводы:  
- В результате проведенной работы проанализированы и преобразованы данные, отобраны значимые признаки. Проведено преобразование признаков для снижения влияния дисбаланса классов целевых переменных. Построены и протестированы модели классификации различной природы, отобрана наиболее эффективная.  
- Наиболее эффективной моделью для задач предсказания вероятности дефектов и проведения экспертизы МЕЕ и ЭКМП оказалась модель XGBClassifier. Для последней подобраны оптимальные параметры.  
- На основании полученных моделей разработано Web приложение для проведения тестовой эксплуатации полученного классификатора совместно с врачами - экспертами отдела Защиты прав застрахованных.  
По итогам тестовой эксплуатации будет принято решение о дальнейшем внедрении.

:arrow_up:[к оглавлению](https://github.com/alzmej/sf_data_science/tree/main/project_7/README.md#Оглавление)


Если информация по этому проекту покажется вам интересной или полезной, то я буду очень вам благодарен, если отметите репозиторий и профиль ⭐️⭐️⭐️-дами